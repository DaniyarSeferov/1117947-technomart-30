const modelSlider={currentIndex:-1,prevIndex:-1,sliders:[]},slider={init:function(){modelSlider.sliders=Array.from(document.querySelectorAll(".proposal-slider-item")),modelSlider.sliders.length&&(modelSlider.currentIndex=this.findCurrentIndex(),sliderButtonsView.init(),sliderDotsView.init())},getSliders:function(){return modelSlider.sliders},getCurrentIndex:function(){return modelSlider.currentIndex},getPrevIndex:function(){return modelSlider.prevIndex},setPrevSlide:function(e){e.preventDefault();e=this.getCurrentIndex();this.isFirstSlide()||this.changeSlide(--e),sliderButtonsView.render(),sliderDotsView.render()},setNextSlide:function(e){e.preventDefault();e=this.getCurrentIndex();this.isLastSlide()||this.changeSlide(++e),sliderButtonsView.render(),sliderDotsView.render()},findCurrentIndex:function(){var e=modelSlider.sliders.findIndex(function(e){return e.classList.contains("proposal-slide-current")});return-1===e?0:e},changeSlide:function(e){modelSlider.prevIndex=modelSlider.currentIndex,-1!==modelSlider.prevIndex&&modelSlider.sliders[modelSlider.prevIndex].classList.remove("proposal-slide-current"),modelSlider.sliders[e].classList.add("proposal-slide-current"),modelSlider.currentIndex=e},isFirstSlide:function(){return 0===modelSlider.currentIndex},isLastSlide:function(){return modelSlider.sliders.length-1===modelSlider.currentIndex}},sliderButtonsView={init:function(){const e=document.querySelector(".proposal-slider");this.btnPrevElem=e.querySelector(".slider-button-prev"),this.btnNextElem=e.querySelector(".slider-button-next"),this.btnPrevElem.addEventListener("click",slider.setPrevSlide.bind(slider)),this.btnNextElem.addEventListener("click",slider.setNextSlide.bind(slider)),this.render()},render:function(){this.btnPrevElem.disabled=!!slider.isFirstSlide(),this.btnNextElem.disabled=!!slider.isLastSlide()}},sliderDotsView={init:function(){this.sliderControlsElem=document.querySelector(".proposal-slider-controls"),this.sliderControls=[];let e,t;var r=slider.getSliders();this.sliderControlsElem.innerHTML="";const s=document.createDocumentFragment();for(t=0;t<r.length;t++)e=document.createElement("span"),e.addEventListener("click",function(t){return function(e){e.preventDefault(),t!==slider.getCurrentIndex()&&(slider.changeSlide(t),sliderButtonsView.render(),sliderDotsView.render())}}(t)),this.sliderControls.push(e),s.appendChild(e);this.sliderControlsElem.appendChild(s),this.render()},render:function(){var e=slider.getPrevIndex(),t=slider.getCurrentIndex();-1!==e&&this.sliderControls[e].classList.remove("current"),this.sliderControls[t].classList.add("current")}},initServices=function(){const n=document.querySelector(".services");if(n){const e=Array.from(n.querySelectorAll(".services-button")),i=Array.from(n.querySelectorAll(".services-desc-list-item"));e.forEach(function(e,t){var s;e.addEventListener("click",(s=t,function(e){e.preventDefault();const t=n.querySelector(".services-button-current"),r=n.querySelector(".services-desc-list-current");t!==e.target&&(t.classList.remove("services-button-current"),r.classList.remove("services-desc-list-current"),e.target.classList.add("services-button-current"),i[s].classList.add("services-desc-list-current"))}))})}},initMessagePopup=function(){const e=document.querySelector(".contacts-form-popup"),n=document.querySelector(".modal-message");if(n){const i=n.querySelector(".modal-close"),l=n.querySelector(".message-form"),o=l.querySelector(".message-user-name"),d=l.querySelector(".message-user-email"),c=l.querySelector(".message-user-text");let t=!0,r="",s="";try{r=localStorage.getItem("userName"),s=localStorage.getItem("userEmail")}catch(e){t=!1}e.addEventListener("click",function(e){e.preventDefault(),n.classList.add("modal-show"),r?(o.value=r,d.focus()):o.focus(),s&&(d.value=s,c.focus())}),i.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("modal-show"),n.classList.remove("modal-error")}),l.addEventListener("submit",function(e){o.value&&d.value&&c.value?t&&(localStorage.setItem("userName",o.value),localStorage.setItem("userEmail",d.value)):(e.preventDefault(),n.classList.remove("modal-error"),n.offsetWidth=n.offsetWidth,n.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){let t=!1;(void 0!==e.key&&"Escape"===e.key||void 0!==e.keyCode&&27===e.keyCode)&&(t=!0),t&&n.classList.contains("modal-show")&&(e.preventDefault(),n.classList.remove("modal-show"),n.classList.remove("modal-error"))})}},initMapPopup=function(){const e=document.querySelector(".contacts-map"),r=document.querySelector(".modal-map");if(r){const t=r.querySelector(".modal-close");e.addEventListener("click",function(e){e.preventDefault(),r.classList.add("modal-show")}),t.addEventListener("click",function(e){e.preventDefault(),r.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){let t=!1;(void 0!==e.key&&"Escape"===e.key||void 0!==e.keyCode&&27===e.keyCode)&&(t=!0),t&&r.classList.contains("modal-show")&&(e.preventDefault(),r.classList.remove("modal-show"))})}},initProductPopup=function(){const e=Array.from(document.querySelectorAll(".buy-button")),r=document.querySelector(".modal-product");if(r){const t=r.querySelector(".modal-close"),s=r.querySelector(".continue-button");e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),r.classList.add("modal-show")})}),t.addEventListener("click",function(e){e.preventDefault(),r.classList.remove("modal-show")}),s.addEventListener("click",function(e){e.preventDefault(),r.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){let t=!1;(void 0!==e.key&&"Escape"===e.key||void 0!==e.keyCode&&27===e.keyCode)&&(t=!0),t&&r.classList.contains("modal-show")&&(e.preventDefault(),r.classList.remove("modal-show"))})}},init=function(){slider.init(),initServices(),initMessagePopup(),initMapPopup(),initProductPopup()};document.addEventListener("DOMContentLoaded",init);
